(function(t){function e(e){for(var a,i,o=e[0],u=e[1],c=e[2],d=0,p=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&p.push(n[i][0]),n[i]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(t[a]=u[a]);l&&l(e);while(p.length)p.shift()();return r.push.apply(r,c||[]),s()}function s(){for(var t,e=0;e<r.length;e++){for(var s=r[e],a=!0,o=1;o<s.length;o++){var u=s[o];0!==n[u]&&(a=!1)}a&&(r.splice(e--,1),t=i(i.s=s[0]))}return t}var a={},n={app:0},r=[];function i(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=a,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(s,a,function(e){return t[e]}.bind(null,a));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/GLO3102-E13-UFOOD/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var l=u;r.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"039a":function(t,e,s){"use strict";s("0918")},"03c5":function(t,e,s){},"068e":function(t,e,s){"use strict";s("9a71")},"0781":function(t,e,s){t.exports=s.p+"img/ufood-logo-no-text.3cbc3d5a.png"},"0918":function(t,e,s){},"180a":function(t,e,s){"use strict";s("68ef")},"1ef4":function(t,e,s){},"3ea7":function(t,e,s){},"49c8":function(t,e,s){"use strict";s("eb52")},"4cff":function(t,e,s){},"4e87":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);var a=s("c973"),n=s.n(a),r=s("a34a"),i=s.n(r),o=s("2b0e"),u=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[this.$root.user?e("nav-menu",{attrs:{user:this.$root.user,logout:t.logout}}):t._e(),e("router-view")],1)},c=[],l=s("970b"),d=s.n(l),p=s("5bc3"),h=s.n(p),f=function(){function t(e){d()(this,t),this.baseURL="https://ufoodapi.herokuapp.com",this.headers=new Headers,this.headers.append("Content-Type","application/json"),this.headers.append("Authorization",e)}return h()(t,[{key:"put",value:function(){var t=n()(i.a.mark((function t(e,s){var a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(this.baseURL+e,{method:"PUT",headers:this.headers,body:JSON.stringify(s)});case 3:return a=t.sent,t.abrupt("return",a);case 7:t.prev=7,t.t0=t["catch"](0),console.error("Problem in put request."),console.error(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(e,s){return t.apply(this,arguments)}return e}()},{key:"post",value:function(){var t=n()(i.a.mark((function t(e,s){var a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(this.baseURL+e,{method:"POST",headers:this.headers,body:JSON.stringify(s)});case 3:return a=t.sent,t.abrupt("return",a);case 7:return t.prev=7,t.t0=t["catch"](0),console.error("Problem in post request."),console.error(t.t0),t.abrupt("return",t.t0);case 12:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(e,s){return t.apply(this,arguments)}return e}()},{key:"get",value:function(){var t=n()(i.a.mark((function t(e){var s;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(this.baseURL+e,{headers:this.headers});case 3:return s=t.sent,t.abrupt("return",s);case 7:t.prev=7,t.t0=t["catch"](0),console.error("Problem in get request."),console.error(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"delete",value:function(){var t=n()(i.a.mark((function t(e){var s;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(this.baseURL+e,{method:"DELETE",headers:this.headers});case 3:return s=t.sent,t.abrupt("return",s);case 7:t.prev=7,t.t0=t["catch"](0),console.error("problem in delete request."),console.error(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(e){return t.apply(this,arguments)}return e}()}]),t}(),v=s("aced"),m=function(){function t(){d()(this,t)}return h()(t,[{key:"success",value:function(t){v["a"].open({duration:5e3,message:t,position:"is-bottom",type:"is-success"})}},{key:"fail",value:function(t){v["a"].open({duration:5e3,message:t,position:"is-bottom",type:"is-danger"})}}]),t}(),g=function(){function t(e){d()(this,t),this.api=new f(e),this.token=this.getTokenCookie(),this.toast=new m}return h()(t,[{key:"getUsers",value:function(){var t=n()(i.a.mark((function t(e){var s,a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=new URLSearchParams,e&&s.append("page",e),console.log(e),t.next=5,this.api.get("/users?"+s);case 5:return a=t.sent,t.next=8,a.json();case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"search",value:function(){var t=n()(i.a.mark((function t(e,s){var a,n;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new URLSearchParams,s&&a.append("page",s),a.append("q",e),t.next=5,this.api.get("/users?"+a);case 5:return n=t.sent,t.next=8,n.json();case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t,this)})));function e(e,s){return t.apply(this,arguments)}return e}()},{key:"getUserById",value:function(){var t=n()(i.a.mark((function t(e){var s;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.api.get("/users/"+e);case 2:return s=t.sent,t.next=5,s.json();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getFavoritesListsByUserId",value:function(){var t=n()(i.a.mark((function t(e){var s;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.api.get("/users/"+e+"/favorites");case 2:return s=t.sent,t.next=5,s.json();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"followUser",value:function(){var t=n()(i.a.mark((function t(e){var s,a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s={id:e},t.next=3,this.api.post("/follow/",s);case 3:if(a=t.sent,!a.ok){t.next=10;break}return t.next=7,a.json();case 7:return t.abrupt("return",t.sent);case 10:throw new Error("Unable to follow user");case 11:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"unfollowUser",value:function(){var t=n()(i.a.mark((function t(e){var s;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.api.delete("/follow/"+e);case 2:if(s=t.sent,!s.ok){t.next=9;break}return t.next=6,s.json();case 6:return t.abrupt("return",t.sent);case 9:throw new Error("Unable to unfollow user");case 10:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"signUp",value:function(){var t=n()(i.a.mark((function t(e){var s;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.api.post("/signup/",e);case 2:if(s=t.sent,!s.ok){t.next=9;break}return t.next=6,s.json();case 6:return t.abrupt("return",t.sent);case 9:this.toast.fail("Username already exists");case 10:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"signUpAndLogin",value:function(){var t=n()(i.a.mark((function t(e){var s,a,n,r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.signUp(e);case 2:if(s=t.sent,a=e.email,n=e.password,s instanceof Error){t.next=11;break}return t.next=7,this.logIn({email:a,password:n});case 7:return r=t.sent,t.abrupt("return",r);case 11:return t.abrupt("return",s);case 12:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"logIn",value:function(){var t=n()(i.a.mark((function t(e){var s,a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.api.post("/login",e);case 2:if(s=t.sent,s.ok){t.next=5;break}return t.abrupt("return",new Error("Invalid credentials"));case 5:return t.next=7,s.json();case 7:return a=t.sent,this.setTokenCookie(a),t.abrupt("return",a);case 10:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"logOut",value:function(){var t=n()(i.a.mark((function t(){var e;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.api.post("/logout");case 2:return e=t.sent,t.abrupt("return",e.ok);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getUserFromToken",value:function(){var t=n()(i.a.mark((function t(){var e;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.api.get("/tokeninfo");case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"setTokenCookie",value:function(t){o["a"].$cookies.set("token",t.token)}},{key:"getTokenCookie",value:function(){return o["a"].$cookies.get("token")}}]),t}(),b=function(){var t=this,e=t._self._c;return e("b-navbar",{attrs:{"fixed-top":!0}},[e("template",{slot:"brand"},[e("b-navbar-item",{attrs:{tag:"router-link",to:{path:"/"}}},[e("figure",{staticClass:"image is-32x32 is-inline"},[e("img",{staticClass:"logoNav",attrs:{src:s("0781"),alt:"logo-no-text"}})]),e("strong",{staticClass:"is-size-4"},[t._v("UFOOD")])])],1),e("template",{slot:"start"},[e("b-navbar-item",{attrs:{tag:"router-link",to:{path:"/"}}},[t._v(" Home ")])],1),e("template",{slot:"end"},[e("b-navbar-item",{attrs:{tag:"div"}},[e("div",{staticClass:"field has-addons"},[e("SearchAutoComplete",{attrs:{names:t.usersAutoComplete,keypressed:t.updateAutoComplete,search:t.search},model:{value:t.searchTerms,callback:function(e){t.searchTerms=e},expression:"searchTerms"}})],1)]),e("b-navbar-item",{attrs:{tag:"div"}},[e("div",{staticClass:"buttons"},[this.isAuthenticated?t._e():e("b-button",{staticClass:"button is-primary",attrs:{tag:"router-link",to:{path:"/SignUp"}}},[e("strong",[t._v("Sign up")])]),this.isAuthenticated?t._e():e("b-button",{staticClass:"button is-light",attrs:{tag:"router-link",to:{path:"/login"}}},[t._v(" Log in ")])],1)]),this.isAuthenticated?e("b-navbar-item",{attrs:{tag:"router-link",to:{path:"/user"}}},[e("b-button",{staticClass:"button is-primary",attrs:{"icon-left":"user"}},[e("strong",[t._v(t._s(this.user.name))])])],1):t._e(),e("b-navbar-item",{attrs:{tag:"div"}},[this.isAuthenticated?e("a",{staticClass:"button is-light",on:{click:t.logout}},[t._v(" Sign out ")]):t._e()])],1)],2)},w=[],_=function(){var t=this,e=t._self._c;return e("section",[e("b-field",[e("b-autocomplete",{attrs:{data:t.names,field:"title",placeholder:"Search restaurants...",loading:!1,clearable:!0},on:{select:t.updateAndSearch,typing:t.filterKeyPressed},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search.apply(null,arguments)}},model:{value:t.searchFilter,callback:function(e){t.searchFilter=e},expression:"searchFilter"}}),e("b-button",{attrs:{"icon-left":"search",type:"is-primary"},on:{click:t.search}},[t._v(" Search ")])],1)],1)},k=[],x=s("b047"),y=s.n(x),C={name:"SearchAutoComplete",props:["names","keypressed","value","search"],data:function(){return{data:[]}},methods:{filterKeyPressed:y()(n()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.searchFilter=this.value,t.next=3,this.keypressed();case 3:case"end":return t.stop()}}),t,this)}))),500),updateAndSearch:function(t){var e=this;return n()(i.a.mark((function s(){return i.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e.searchFilter=t,s.next=3,e.search();case 3:case"end":return s.stop()}}),s)})))()}},computed:{searchFilter:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}}},L=C,P=s("2877"),F=Object(P["a"])(L,_,k,!1,null,"72474626",null),U=F.exports,R={components:{SearchAutoComplete:U},props:["logout","user"],data:function(){return{apiUsers:new g(this.user.token),searchTerms:"",usersAutoComplete:[]}},methods:{toggleLogIn:function(){this.isLoggedIn=!this.isLoggedIn,this.isLoggedIn||this.$router.push({name:"Home"})},updateAutoComplete:function(){var t=this;this.apiUsers.search(this.searchTerms).then((function(e){console.log(e),t.usersAutoComplete=e.items.map((function(t){return t.name}))}))},search:function(){this.isLoggedIn?this.$route.params.searchTerms=this.searchTerms:""===this.searchTerms?this.$router.push({name:"UserGuestView",params:{searchTerms:"all"}}).catch((function(){})):this.$router.push({name:"UserGuestView",params:{searchTerms:this.searchTerms}}).catch((function(){}))}},computed:{isAuthenticated:function(){return this.$root.authenticated}}},I=R,M=(s("acec"),Object(P["a"])(I,b,w,!1,null,"a20e26fe",null)),V=M.exports,$={name:"app",components:{"nav-menu":V},data:function(){return{userApi:new g}},methods:{logout:function(){var t=this;return n()(i.a.mark((function e(){var s;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.userApi.logOut();case 2:s=e.sent,s&&(t.$root.user=null,t.$root.authenticated=!1,t.$cookies.remove("token"),t.$router.push("/login"));case 4:case"end":return e.stop()}}),e)})))()}}},S=$,O=(s("d184"),Object(P["a"])(S,u,c,!1,null,null,null)),A=O.exports,T=s("8c4f"),D=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home"},[e("div",{staticClass:"hero is-dark"},[e("div",{staticClass:"hero-body"},[e("div",{staticClass:"container has-text-centered"},[e("img",{staticClass:"logoBanner",attrs:{src:s("ea02"),alt:"ufood-logo-transparent.png"}}),e("div",{staticClass:"button-block"},[this.$root.authenticated?t._e():e("button",{staticClass:"button is-xl is-dark"},[t._v("Sign Up")])])])])]),e("div",{staticClass:"home-page"},[e("div",{staticClass:"columns"},[t.isNavbarOpen?[e("div",{staticClass:"column is-narrow"},[e("sidebar",{on:{updatePrice:t.priceFilterChanged,updateGenre:t.genreFilterChanged}})],1)]:t._e(),e("div",{staticClass:"column"},[e("h1",{staticClass:"title"},[t._v("Restaurants")]),e("b-pagination",{attrs:{total:t.totalPages,"per-page":t.restaurantsPerPage},on:{change:t.updateRestaurants},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}),e("b-button",{attrs:{"icon-left":"map"},on:{click:t.toggleMapMode}},[t._v(t._s(t.isMapMode?"List":"Map"))]),t.isMobile||t.isWindowReduced?e("b-button",{attrs:{"icon-left":"filter"},on:{click:function(e){t.isNavbarOpen=!t.isNavbarOpen}}},[t._v("Filters")]):t._e(),e("b-field",[e("SearchAutoComplete",{attrs:{names:t.restaurantAutocomplete,keypressed:t.updateAutoComplete,search:t.updateRestaurants},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updateRestaurants.apply(null,arguments)}},model:{value:t.searchFilterTerms,callback:function(e){t.searchFilterTerms=e},expression:"searchFilterTerms"}})],1),e("div",{staticClass:"columns is-multiline"},[t.restaurants.length<1&&this.isRestaurantsLoaded?e("div",{staticClass:"column is-half-desktop is-full-tablet"},[t._v(" No Restaurants found ")]):t._e(),t._l(t.restaurants,(function(s){return e("div",{key:s.id,class:{column:!0,"is-half-desktop":!t.isMapMode,"is-full-tablet":!t.isMapMode}},[e("restaurant-card",{attrs:{restaurant:s,user:t.user,provenance:t.provenance,hideModal:!1,isLoaded:t.isRestaurantsLoaded}})],1)}))],2)],1),t.isMapMode?e("div",{staticClass:"column is-half-desktop is-full-tablet"},[t.restaurants.length>0?e("restaurant-map",{attrs:{restaurants:t.restaurants,currentPos:t.currentPos}}):t._e()],1):t._e()],2)])])},j=[],E=function(){var t=this,e=t._self._c;return e("section",{staticClass:"sidebar-layout"},[e("b-sidebar",{attrs:{position:"static",fullwidth:!0,fullheight:!0},model:{value:t.open,callback:function(e){t.open=e},expression:"open"}},[e("b-menu",{staticClass:"is-custom-mobile"},[e("b-menu-list",{attrs:{label:"Filters"}},[e("b-field",[e("b-checkbox-button",{attrs:{"native-value":"1"},on:{input:t.onPriceChange},model:{value:t.checkboxPriceGroup,callback:function(e){t.checkboxPriceGroup=e},expression:"checkboxPriceGroup"}},[t._v(" $ ")]),e("b-checkbox-button",{attrs:{"native-value":"2"},on:{input:t.onPriceChange},model:{value:t.checkboxPriceGroup,callback:function(e){t.checkboxPriceGroup=e},expression:"checkboxPriceGroup"}},[t._v(" $$ ")]),e("b-checkbox-button",{attrs:{"native-value":"3"},on:{input:t.onPriceChange},model:{value:t.checkboxPriceGroup,callback:function(e){t.checkboxPriceGroup=e},expression:"checkboxPriceGroup"}},[t._v(" $$$ ")]),e("b-checkbox-button",{attrs:{"native-value":"4"},on:{input:t.onPriceChange},model:{value:t.checkboxPriceGroup,callback:function(e){t.checkboxPriceGroup=e},expression:"checkboxPriceGroup"}},[t._v(" $$$$ ")]),e("b-checkbox-button",{attrs:{"native-value":"5"},on:{input:t.onPriceChange},model:{value:t.checkboxPriceGroup,callback:function(e){t.checkboxPriceGroup=e},expression:"checkboxPriceGroup"}},[t._v(" $$$$$ ")])],1)],1),e("b-menu-list",{attrs:{label:"Genre"}},t._l(t.genresList,(function(s){return e("div",{key:s.native,staticClass:"field"},[e("b-checkbox",{attrs:{"native-value":s.native},on:{input:t.onGenresChange},model:{value:t.genresCheckbox,callback:function(e){t.genresCheckbox=e},expression:"genresCheckbox"}},[t._v(t._s(s.name))])],1)})),0)],1)],1)],1)},N=[],G={data:function(){return{expandOnHover:!0,mobile:"hide",reduce:!1,open:!0,checkboxPriceGroup:[],genresCheckbox:[],genresList:[{native:"végétarien",name:"Vegetarian"},{native:"santé",name:"Healthy"},{native:"italien",name:"Italian"},{native:"asiatique",name:"Asian"},{native:"mexicain",name:"Mexican"},{native:"libanais",name:"Lebanese"},{native:"bistro",name:"Bistro"},{native:"pizzeria",name:"Pizza"},{native:"fast-food",name:"Fast-Food"},{native:"hamburgers",name:"Hamburgers"},{native:"fruits de mer",name:"Fish"},{native:"happy hour",name:"Happy hour"},{native:"ambiance",name:"Ambiance"},{native:"européen",name:"European"},{native:"café",name:"Café"},{native:"desserts",name:"Desserts"}]}},methods:{onPriceChange:function(){this.$emit("updatePrice",this.checkboxPriceGroup)},onGenresChange:function(){this.$emit("updateGenre",this.genresCheckbox)}}},q=G,B=(s("039a"),Object(P["a"])(q,E,N,!1,null,null,null)),z=B.exports,W=function(){function t(e){d()(this,t),this.api=new f(e)}return h()(t,[{key:"getRestaurants",value:function(){var t=n()(i.a.mark((function t(e){var s,a,n,r,o,u,c,l,d=arguments;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=d.length>1&&void 0!==d[1]?d[1]:"",a=d.length>2&&void 0!==d[2]?d[2]:"",n=d.length>3&&void 0!==d[3]?d[3]:"",r=d.length>4&&void 0!==d[4]?d[4]:"",o=d.length>5?d[5]:void 0,u=d.length>6?d[6]:void 0,c=new URLSearchParams({page:e}),s&&c.append("q",s),a&&c.append("limit",a),n.length>0&&c.append("genres",n),r.length>0&&c.append("price_range",r),o&&c.append("lat",o),u&&c.append("lon",u),t.next=15,this.api.get("/restaurants?"+c);case 15:return l=t.sent,t.next=18,l.json();case 18:return t.abrupt("return",t.sent);case 19:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getRestaurant",value:function(){var t=n()(i.a.mark((function t(e){var s;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.api.get("/restaurants/"+e);case 2:return s=t.sent,t.next=5,s.json();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),t}(),H=function(){var t=this,e=t._self._c;return e("div",{staticClass:"restaurant-box"},[t.isLoaded?t._e():e("div",{staticClass:"box"},[e("div",{staticClass:"columns is-mobile"},[e("div",{staticClass:"column is-one-third"},[e("b-carousel",{attrs:{autoplay:!1,indicator:!1}})],1),e("div",{staticClass:"column"},[e("h5",{staticClass:"title is-5"},[e("b-skeleton",{attrs:{animated:!0}})],1),e("b-skeleton",{attrs:{animated:!0}}),e("b-skeleton",{attrs:{animated:!0}}),e("b-skeleton",{attrs:{animated:!0}}),e("b-skeleton",{attrs:{animated:!0}}),e("b-skeleton",{attrs:{animated:!0}})],1)])]),t.isLoaded?e("div",{staticClass:"box"},[e("div",{staticClass:"columns"},[e("div",{staticClass:"column"},[e("b-carousel",{attrs:{autoplay:!1,indicator:!1}},t._l(t.restaurant.pictures,(function(s,a){return e("b-carousel-item",{key:a},[e("figure",{staticClass:"image is-square"},[e("img",{attrs:{src:s,alt:t.restaurant.name}})])])})),1)],1),e("div",{staticClass:"column"},[e("h5",{staticClass:"title is-5"},[e("router-link",{attrs:{to:"restaurant/"+t.restaurant.id}},[t._v(t._s(t.restaurant.name))]),t._v(" ("),t._l(t.restaurant.price_range,(function(s){return e("span",{key:s},[e("strong",[t._v("$")])])})),t._v(") ")],2),e("star-rating",{attrs:{inline:!0,"star-size":20,"read-only":!0,"show-rating":!0,rating:t.restaurant.rating,"fixed-points":1,increment:.1}}),e("p",[t._v(" Genres: "),t._l(t.restaurant.genres,(function(s){return e("span",{key:s},[t._v(t._s(s)+", ")])}))],2),e("div",{staticClass:"address"},[t._v(t._s(t.restaurant.address))]),e("div",{staticClass:"telephone"},[t._v(t._s(t.restaurant.tel))]),t.user&&0==this.hideModal?e("modale-button",{attrs:{restaurantId:t.restaurant.id,user:t.user,provenance:t.provenance,visits:t.visits,color:"is-primary"}}):t._e(),t.favoriteLists?e("dropdown-favorites",{attrs:{favoriteLists:t.favoriteLists,addToListEvent:t.addToList}}):t._e(),t.deleteFromList?e("b-button",{attrs:{type:"is-danger is-small"},on:{click:function(e){return t.deleteFromList(t.restaurant.id)}}},[t._v("Delete")]):t._e()],1)])]):t._e()])},J=[],K=function(){var t=this,e=t._self._c;return e("b-dropdown",{attrs:{"aria-role":"list",disabled:t.isDisabled}},[e("b-button",{staticClass:"button is-dark is-small",attrs:{slot:"trigger",type:"button","icon-left":"plus"},slot:"trigger"},[t._v(" Add to favorite ")]),t._l(t.favoriteLists,(function(s){return e("b-dropdown-item",{key:s.id,attrs:{"aria-role":"listitem"},on:{click:function(e){return t.addToListEvent(s.id)}}},[t._v(" "+t._s(s.name)+" ")])}))],2)},X=[],Y={props:["favoriteLists","addToListEvent"],data:function(){return{isDisabled:this.isListEmpty()}},methods:{isListEmpty:function(){return 0==this.favoriteLists.length}}},Z=Y,Q=Object(P["a"])(Z,K,X,!1,null,null,null),tt=Q.exports,et=function(){var t=this,e=t._self._c;return t.isComponentModalReadonly?e("span",{staticClass:"btn-modale"},[e("button",{staticClass:"button",class:t.color,on:{click:function(e){return t.openModal(t.restaurantId)}}},[t._v(" Open visit info ")]),e("visit-modal",{attrs:{isComponentModalActive:t.isComponentModalActive,isComponentModalReadonly:t.isComponentModalReadonly,restaurantId:t.restaurantId,user:t.user,close:t.closeModal,visits:t.visits}})],1):e("span",{staticClass:"btn-modale"},[e("button",{staticClass:"button",class:t.color,on:{click:function(e){return t.openModal(t.restaurantId)}}},[t._v(" Mark as visited ")]),e("visit-modal",{attrs:{isComponentModalActive:t.isComponentModalActive,restaurantId:t.restaurantId,user:t.user,close:t.closeModal}})],1)},st=[],at=function(){var t=this,e=t._self._c;return e("section",[this.isComponentModalReadonly?e("div",[e("b-modal",{attrs:{active:t.isComponentModalActive,"has-modal-card":"","trap-focus":"","destroy-on-hide":!1,"on-cancel":t.close,"aria-role":"dialog","aria-modal":""}},[e("b-pagination",{attrs:{total:t.totalVisits,"per-page":"1"},on:{change:t.loadVisitInfo},model:{value:t.currentVisit,callback:function(e){t.currentVisit=e},expression:"currentVisit"}}),e("visit",{attrs:{close:t.close,visitInfo:t.visitInfo}})],1)],1):e("div",{staticClass:"visit-modal"},[e("b-modal",{attrs:{active:t.isComponentModalActive,"has-modal-card":"","trap-focus":"","destroy-on-hide":!1,"on-cancel":t.close,"aria-role":"dialog","aria-modal":""}},[e("visit-form",{attrs:{close:t.close,submit:t.submit,formProps:t.formProps}})],1)],1)])},nt=[],rt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"visit-form"},[e("form",{attrs:{action:""}},[e("div",{staticClass:"modal-card"},[e("header",{staticClass:"modal-card-head"},[e("p",{staticClass:"modal-card-title"},[t._v("Visit information")]),e("button",{staticClass:"delete",attrs:{type:"button"},on:{click:t.close}})]),e("section",{staticClass:"modal-card-body"},[e("b-field",{attrs:{label:"Select a rating"}},[e("star-rating",{attrs:{"star-size":20,"show-rating":!0},model:{value:t.formProps.rating,callback:function(e){t.$set(t.formProps,"rating",e)},expression:"formProps.rating"}})],1),e("b-field",{attrs:{label:"Select a date"}},[e("b-datepicker",{attrs:{locale:"en-CA",placeholder:"Click to select...",icon:"calendar","trap-focus":"","append-to-body":"","max-date":t.today},model:{value:t.formProps.date,callback:function(e){t.$set(t.formProps,"date",e)},expression:"formProps.date"}})],1),e("b-field",{attrs:{label:"Message"}},[e("b-input",{ref:"message",attrs:{minlength:"1",maxlength:"500",type:"textarea",required:"","validation-message":"Message is mandatory"},model:{value:t.formProps.message,callback:function(e){t.$set(t.formProps,"message",e)},expression:"formProps.message"}})],1)],1),e("footer",{staticClass:"modal-card-foot"},[e("button",{staticClass:"button",attrs:{type:"button"},on:{click:t.close}},[t._v(" Close ")]),e("button",{staticClass:"button is-primary",on:{click:t.validateAndSubmit}},[t._v(" Save ")])])])])])},it=[],ot={name:"VisitForm",props:["submit","close","formProps"],data:function(){return{today:new Date}},methods:{validateAndSubmit:function(){this.$refs.message.checkHtml5Validity()&&this.submit(this.formProps)}}},ut=ot,ct=Object(P["a"])(ut,rt,it,!1,null,null,null),lt=ct.exports,dt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"visit"},[e("form",{attrs:{action:""}},[e("div",{staticClass:"modal-card"},[e("header",{staticClass:"modal-card-head"},[e("p",{staticClass:"modal-card-title"},[t._v("Visit information")]),e("button",{staticClass:"delete",attrs:{type:"button"},on:{click:t.close}})]),e("section",{staticClass:"modal-card-body"},[e("star-rating",{attrs:{inline:!0,"star-size":20,"read-only":!0,"show-rating":!0,rating:t.visitInfo.rating,"fixed-points":1,increment:.1}}),e("div",{staticClass:"visit-date"},[t._v(" Date of visit : "+t._s(t.visitInfo.date.slice(0,10))+" ")]),e("div",{staticClass:"visit-message"},[t._v("Comment : "+t._s(t.visitInfo.comment))])],1),e("footer",{staticClass:"modal-card-foot"},[e("button",{staticClass:"button",attrs:{type:"button"},on:{click:t.close}},[t._v(" Close ")])])])])])},pt=[],ht={name:"VisitForm",props:["close","visitInfo"],data:function(){return{}}},ft=ht,vt=Object(P["a"])(ft,dt,pt,!1,null,null,null),mt=vt.exports,gt=function(){function t(e,s){d()(this,t),this.api=new f(s),this.userId=e}return h()(t,[{key:"getAllRestaurantsVisits",value:function(){var t=n()(i.a.mark((function t(e){var s,a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=new URLSearchParams({page:e}),t.next=3,this.api.get("/users/"+this.userId+"/restaurants/visits?"+s);case 3:return a=t.sent,t.next=6,a.json();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getRestaurantVisit",value:function(){var t=n()(i.a.mark((function t(e){var s;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.api.get("/users/"+this.userId+"/restaurants/visits/"+e);case 2:return s=t.sent,t.next=5,s.json();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"createRestaurantVisit",value:function(){var t=n()(i.a.mark((function t(e,s,a,n){var r,o;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={restaurant_id:e,comment:s,rating:a,date:n},t.next=3,this.api.post("/users/"+this.userId+"/restaurants/visits/",r);case 3:return o=t.sent,t.next=6,o.json();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));function e(e,s,a,n){return t.apply(this,arguments)}return e}()}]),t}(),bt={name:"VisitModal",created:function(){this.isComponentModalReadonly&&(this.totalVisits=this.visits.length,this.currentVisit=1,this.loadVisitInfo())},components:{VisitForm:lt,Visit:mt},props:["isComponentModalReadonly","isComponentModalActive","restaurantId","user","close","visits"],data:function(){return{apiVisits:new gt(this.user.id,this.user.token),visitInfo:{},totalVisits:1,currentVisit:1,formProps:{message:"",date:new Date,rating:0}}},methods:{submit:function(t){var e=this;return n()(i.a.mark((function s(){var a;return i.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,e.apiVisits.createRestaurantVisit(e.restaurantId,t.message,t.rating,t.date);case 2:a=s.sent,e.formProps.message="",e.formProps.date=new Date,e.formProps.rating=0,a?(e.$buefy.toast.open({duration:5e3,message:"Visit posted successfully",position:"is-bottom",type:"is-success"}),e.close()):e.$buefy.toast.open({duration:5e3,message:"Error posting information, please try again",position:"is-top",type:"is-danger"});case 7:case"end":return s.stop()}}),s)})))()},loadVisitInfo:function(){this.visitInfo=this.visits[this.currentVisit-1]}}},wt=bt,_t=Object(P["a"])(wt,at,nt,!1,null,null,null),kt=_t.exports,xt={name:"ModaleButton",components:{VisitModal:kt},props:["restaurantId","user","color","provenance","visits"],data:function(){return{isComponentModalActive:!1,isComponentModalReadonly:void 0!=this.visits}},methods:{openModal:function(t){this.isComponentModalActive=!this.isComponentModalActive,this.restaurantModalId=t},closeModal:function(){this.isComponentModalActive=!1}}},yt=xt,Ct=Object(P["a"])(yt,et,st,!1,null,null,null),Lt=Ct.exports,Pt=function(){function t(e){d()(this,t),this.api=new f(e),this.toast=new m}return h()(t,[{key:"getFavorites",value:function(){var t=n()(i.a.mark((function t(){var e;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.api.get("/favorites/");case 2:return e=t.sent,t.next=5,e.json();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getFavoriteListById",value:function(){var t=n()(i.a.mark((function t(e){var s;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.api.get("/favorites/"+e);case 2:return s=t.sent,t.next=5,s.json();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"createFavoriteList",value:function(){var t=n()(i.a.mark((function t(e,s){var a,n;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={name:e,owner:s},t.next=3,this.api.post("/favorites/",a);case 3:return n=t.sent,n.ok?this.toast.success("List created successfully"):this.toast.fail("Error creating list, please try again"),t.next=7,n.json();case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})));function e(e,s){return t.apply(this,arguments)}return e}()},{key:"updateFavoriteList",value:function(){var t=n()(i.a.mark((function t(e,s,a){var n,r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={name:s,owner:a},t.next=3,this.api.put("/favorites/"+e,n);case 3:return r=t.sent,r.ok?this.toast.success("List updated successfully"):this.toast.fail("Error updating name, please try again"),t.next=7,r.json();case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})));function e(e,s,a){return t.apply(this,arguments)}return e}()},{key:"deleteFavoriteList",value:function(){var t=n()(i.a.mark((function t(e){var s;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.api.delete("/favorites/"+e);case 2:return s=t.sent,s.ok?this.toast.success("List removed successfully"):this.toast.fail("Error deleting list, please try again"),t.next=6,s.json();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"addRestaurantToList",value:function(){var t=n()(i.a.mark((function t(e,s){var a,n;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={id:s},t.next=3,this.api.post("/favorites/"+e+"/restaurants",a);case 3:return n=t.sent,t.next=6,n.json();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));function e(e,s){return t.apply(this,arguments)}return e}()},{key:"deleteRestaurantFromList",value:function(){var t=n()(i.a.mark((function t(e,s){var a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.api.delete("/favorites/"+e+"/restaurants/"+s);case 2:return a=t.sent,a.ok?this.toast.success("Restaurant removed from list successfully"):this.toast.fail("Error deleting restaurant from list, please try again"),t.next=6,a.json();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));function e(e,s){return t.apply(this,arguments)}return e}()}]),t}(),Ft={name:"RestaurantCard",props:["isLoaded","restaurant","user","provenance","visits","hideModal","favoriteLists","deleteFromList"],components:{ModaleButton:Lt,DropdownFavorites:tt},data:function(){return{userId:this.user?this.user.id:null,apiFavorites:this.user?new Pt(this.user.token):null}},methods:{addToList:function(t){var e=this;return n()(i.a.mark((function s(){var a;return i.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,e.apiFavorites.addRestaurantToList(t,e.restaurant.id);case 2:a=s.sent,a instanceof Error?e.$buefy.toast.open({duration:5e3,message:"Error adding restaurant to favorites",position:"is-top",type:"is-danger"}):e.$buefy.toast.open({duration:5e3,message:"".concat(e.restaurant.name," added to ").concat(a.name),position:"is-bottom",type:"is-success"}),e.$emit("addedToFavorite");case 5:case"end":return s.stop()}}),s)})))()}}},Ut=Ft,Rt=(s("49c8"),s("d28c"),Object(P["a"])(Ut,H,J,!1,null,"c925924a",null)),It=Rt.exports,Mt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"restaurant-map"},[e("GmapMap",{ref:"mapRef",attrs:{center:t.currentPos,zoom:13,"map-type-id":"terrain"}},[e("Gmap-info-window",{attrs:{options:t.infoOptions,position:t.infoWindowPos,opened:t.infoWinOpen},on:{closeclick:function(e){t.infoWinOpen=!1}}},[t.currentRestaurant?e("restaurant-card",{attrs:{restaurant:t.currentRestaurant,isLoaded:!0}}):t._e()],1),t._l(t.restaurants,(function(s,a){return e("GmapMarker",{key:a,attrs:{position:{lat:s.location.coordinates[1],lng:s.location.coordinates[0]},clickable:!0,draggable:!0},on:{click:function(e){return t.toggleInfoWindow(s,a)}}})}))],2)],1)},Vt=[],$t=s("1923"),St={name:"RestaurantMap",props:["restaurants","currentPos"],computed:{google:$t["gmapApi"]},components:{RestaurantCard:It},beforeUpdate:function(){var t=this;this.$refs.mapRef.$mapPromise.then((function(e){var s=new t.google.maps.LatLngBounds;t.restaurants.forEach((function(e){s.extend(new t.google.maps.LatLng(e.location.coordinates[1],e.location.coordinates[0]))})),e.fitBounds(s)}))},data:function(){return{map:void 0,infoWindowPos:null,infoWinOpen:!1,currentRestaurant:null,infoOptions:{pixelOffset:{width:0,height:-35}}}},methods:{toggleInfoWindow:function(t,e){this.currentRestaurant=t,this.infoWindowPos={lat:t.location.coordinates[1],lng:t.location.coordinates[0]},this.currentMidx==e?this.infoWinOpen=!this.infoWinOpen:(this.infoWinOpen=!0,this.currentMidx=e)}}},Ot=St,At=(s("068e"),Object(P["a"])(Ot,Mt,Vt,!1,null,"85626870",null)),Tt=At.exports,Dt={name:"home",created:function(){window.addEventListener("resize",this.myEventHandler),this.isNavbarOpen=!this.isMobile,this.detectWindowSize(),this.updateRestaurants()},destroyed:function(){window.removeEventListener("resize",this.myEventHandler)},methods:{toggleMapMode:function(){var t=this;return n()(i.a.mark((function e(){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.isMapMode||navigator.geolocation.getCurrentPosition(function(){var e=n()(i.a.mark((function e(s){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.currentPos={lat:s.coords.latitude,lng:s.coords.longitude},e.next=3,t.updateRestaurants();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n()(i.a.mark((function e(){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.currentPos={lat:t.restaurants[0].location.coordinates[1],lng:t.restaurants[0].location.coordinates[0]},e.next=3,t.updateRestaurants();case 3:window.alert("Impossible to determine location");case 4:case"end":return e.stop()}}),e)})))),t.isMapMode=!t.isMapMode;case 2:case"end":return e.stop()}}),e)})))()},priceFilterChanged:function(t){var e=this;return n()(i.a.mark((function s(){return i.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e.price_range_filter=t,s.next=3,e.updateRestaurants();case 3:case"end":return s.stop()}}),s)})))()},genreFilterChanged:function(t){var e=this;return n()(i.a.mark((function s(){return i.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e.genres_filter=t,s.next=3,e.updateRestaurants();case 3:case"end":return s.stop()}}),s)})))()},updateRestaurants:function(){var t=this;return n()(i.a.mark((function e(){var s;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isRestaurantsLoaded=!1,e.next=3,t.getRestaurants();case 3:s=e.sent,t.totalPages=s.total,t.restaurants=s.items,t.isRestaurantsLoaded=!0;case 7:case"end":return e.stop()}}),e)})))()},getRestaurants:function(){var t=this;return n()(i.a.mark((function e(){var s,a,n;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.isMapMode?t.currentPos.lat:"",a=t.isMapMode?t.currentPos.lng:"",e.next=4,t.apiRestaurant.getRestaurants(t.currentPage-1,t.searchFilterTerms,null,t.genres_filter,t.price_range_filter,s,a);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))()},updateAutoComplete:function(){var t=this;this.getRestaurants().then((function(e){t.restaurantAutocomplete=e.items.map((function(t){return t.name}))}))},myEventHandler:function(){this.detectWindowSize()},detectWindowSize:function(){var t=window.innerWidth;t<=1025&&!this.isMobile?(this.isNavbarOpen=!1,this.isWindowReduced=!0):t>1025&&!this.isMobile&&(this.isNavbarOpen=!0,this.isWindowReduced=!1)}},data:function(){return{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isNavbarOpen:!0,isWindowReduced:!1,restaurants:[],apiRestaurant:new W(this.$root.user.token),currentPage:1,totalPages:100,restaurantsPerPage:10,searchFilterTerms:"",price_range_filter:[],genres_filter:[],isRestaurantsLoaded:!1,isComponentModalActive:!1,restaurantModalId:0,provenance:"home",user:this.$root.user,isMapMode:!1,currentPos:{},restaurantAutocomplete:[]}},components:{SearchAutoComplete:U,sidebar:z,RestaurantCard:It,RestaurantMap:Tt}},jt=Dt,Et=(s("a87d"),Object(P["a"])(jt,D,j,!1,null,"a9981686",null)),Nt=Et.exports,Gt=function(){var t=this,e=t._self._c;return t.isRestaurantsLoaded?e("div",{staticClass:"restaurant"},[e("restaurant-content",{attrs:{restaurant:t.restaurant}},[e(t.dropdownComponent,{tag:"component",attrs:{favoriteLists:t.favorites.items,addToListEvent:t.addRestaurantToList}})],1)],1):t._e()},qt=[],Bt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"restaurant-single"},[e("section",{staticClass:"hero is-primary"},[e("div",{staticClass:"hero-body"},[e("b-carousel-list",t._b({attrs:{data:t.carouselPictures}},"b-carousel-list",t.carouselProperties,!1)),e("div",{staticClass:"container"},[e("h1",{staticClass:"title"},[t._v(" "+t._s(t.restaurant.name)+" ")]),e("star-rating",{attrs:{inline:!0,"border-width":2,"border-color":"black","star-size":20,"read-only":!0,"show-rating":!1,rating:t.restaurant.rating,"round-start-rating":!1}}),t._v(" "+t._s(t.restaurant.rating.toFixed(2))+" "),e("h2",{staticClass:"subtitle"},[t._l(t.restaurant.genres,(function(s,a,n){return e("span",{key:n},[e("strong",[t._v(t._s(s)+", ")])])})),t._v(" · "),t._l(t.restaurant.price_range,(function(s){return e("span",{key:s},[e("strong",[t._v("$")])])}))],2),e("div",{staticClass:"buttons-header"},[t._t("default"),t.user?e("modale-button",{attrs:{restaurantId:t.restaurant.id,user:t.user,color:"is-dark"}}):t._e()],2)],1)],1)]),e("section",{staticClass:"section"},[e("div",{staticClass:"container"},[e("div",{staticClass:"columns is-multiline"},[e("div",{staticClass:"column is-two-thirds"},[e("div",{staticClass:"box"},[e("div",{staticClass:"columns"},[e("div",{staticClass:"column is-half"},[e("div",{attrs:{id:"map"}},[e("GmapMap",{ref:"mapRef",staticStyle:{width:"100%","min-height":"300px"},attrs:{center:{lat:t.restaurant.location.coordinates[1],lng:t.restaurant.location.coordinates[0]},zoom:16,"map-type-id":"terrain"}},[e("GmapMarker",{attrs:{position:{lat:t.restaurant.location.coordinates[1],lng:t.restaurant.location.coordinates[0]},clickable:!0,draggable:!0},on:{click:function(e){t.center=t.m.position}}})],1)],1),e("br")]),e("div",{staticClass:"column is-half"},[e("strong",[t._v(t._s(t.restaurant.address))]),t._l(t.restaurant.opening_hours,(function(s,a){return e("div",{key:a,staticStyle:{display:"flex"}},[e("span",{staticStyle:{width:"40px"}},[e("strong",[t._v(t._s(a.toUpperCase().slice(0,3)))])]),e("span",[t._v(" : "+t._s(null===s?"closed":s))])])}))],2)])])]),e("div",{staticClass:"column is-one-third"},[e("div",{staticClass:"menu sticky has-text-left has-border"},[e("div",{staticClass:"buttons"},[e("b-button",{attrs:{type:"is-link","icon-left":"phone",expanded:""}},[t._v(" "+t._s(t.restaurant.tel)+" ")]),e("b-button",{attrs:{type:"is-link","icon-left":"directions",expanded:""},on:{click:t.showDirections}},[t._v(" Directions ")])],1)])])])])])])},zt=[],Wt={name:"RestaurantContent",props:["restaurant"],computed:{google:$t["gmapApi"]},components:{ModaleButton:Lt},mounted:function(){var t=this;this.$nextTick((function(){t.$refs.mapRef.$mapPromise.then((function(e){t.map=e,t.directionsDisplay=new t.google.maps.DirectionsRenderer}))})),this.carouselPictures=this.showPicturesCarousel()},data:function(){return{map:void 0,directionsDisplay:void 0,isDirectionShown:!1,carouselPictures:void 0,carouselProperties:{itemsToShow:1,breakpoints:{768:{itemsToShow:2},960:{itemsToShow:4}}},user:this.$root.user}},methods:{showPicturesCarousel:function(){return this.restaurant.pictures.map((function(t){return{title:"",image:t}}))},showDirections:function(){var t=this;if(this.directionsDisplay.setMap(this.map),this.isDirectionShown)this.directionsDisplay.setDirections({routes:[]}),this.map.setCenter({lat:this.restaurant.location.coordinates[1],lng:this.restaurant.location.coordinates[0]}),this.map.setZoom(16),this.isDirectionShown=!1;else{var e=new this.google.maps.DirectionsService;navigator.geolocation?navigator.geolocation.getCurrentPosition((function(s){var a={lat:s.coords.latitude,lng:s.coords.longitude};e.route({origin:a,destination:{lat:t.restaurant.location.coordinates[1],lng:t.restaurant.location.coordinates[0]},travelMode:"DRIVING"},(function(e,s){"OK"===s?(t.directionsDisplay.setDirections(e),t.isDirectionShown=!0):window.alert("Directions failed")}))}),(function(){window.alert("Directions failed")})):window.alert("Directions failed")}}}},Ht=Wt,Jt=(s("fe4e"),Object(P["a"])(Ht,Bt,zt,!1,null,null,null)),Kt=Jt.exports,Xt={name:"restaurant",components:{RestaurantContent:Kt,DropdownFavorites:tt},beforeMount:function(){var t=this;return n()(i.a.mark((function e(){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getRestaurant(t.$route.params.id);case 2:return t.restaurant=e.sent,e.next=5,t.getUserFavorites();case 5:t.favorites=e.sent,t.isRestaurantsLoaded=!0;case 7:case"end":return e.stop()}}),e)})))()},data:function(){return{apiRestaurant:new W(this.$root.user.token),apiUser:new g(this.$root.user.token),apiFavorites:new Pt(this.$root.user.token),isRestaurantsLoaded:!1,userId:this.$root.user.id,restaurant:void 0,favorites:void 0,dropdownComponent:"DropdownFavorites"}},methods:{getRestaurant:function(t){var e=this;return n()(i.a.mark((function s(){var a;return i.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e.isRestaurantsLoaded=!1,s.next=3,e.apiRestaurant.getRestaurant(t);case 3:return a=s.sent,s.abrupt("return",a);case 5:case"end":return s.stop()}}),s)})))()},getUserFavorites:function(){var t=this;return n()(i.a.mark((function e(){var s;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.apiUser.getFavoritesListsByUserId(t.userId);case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}}),e)})))()},addRestaurantToList:function(t){var e=this;return n()(i.a.mark((function s(){var a;return i.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,e.apiFavorites.addRestaurantToList(t,e.restaurant.id);case 2:a=s.sent,a instanceof Error?e.$buefy.toast.open({duration:5e3,message:"Error adding restaurant to favorites",position:"is-top",type:"is-danger"}):e.$buefy.toast.open({duration:5e3,message:"".concat(e.restaurant.name," added to ").concat(a.name),position:"is-bottom",type:"is-success"});case 4:case"end":return s.stop()}}),s)})))()}}},Yt=Xt,Zt=Object(P["a"])(Yt,Gt,qt,!1,null,null,null),Qt=Zt.exports,te=function(){var t=this,e=t._self._c;return e("div",{staticClass:"section"},[e("div",{staticClass:"columns"},[e("div",{staticClass:"column is-one-quarter"},[e("div",{staticClass:"box profile-container has-text-centered"},[e("figure",{staticClass:"image profile"},[e("img",{attrs:{src:this.gravatarURL,alt:"user icon"}})]),e("h4",{staticClass:"subtitle is-5"},[t._v("Profile Info")]),e("p",[t._v("Your rating: "+t._s(t.profile.rating))]),e("b-dropdown",{attrs:{"aria-role":"list"}},[e("button",{staticClass:"button is-primary",attrs:{slot:"trigger"},slot:"trigger"},[e("span",[t._v("Favorite lists")])]),t._l(t.favorites_lists,(function(s){return e("b-dropdown-item",{key:s.id,attrs:{"aria-role":"listitem"},on:{click:function(e){return t.loadFavoriteListItems(s.id)}}},[t._v(" "+t._s(s.name)+" ")])}))],2),e("favorites-manager",{attrs:{favoritesLists:t.favorites_lists,userId:t.user.id,deleteSelectedList:t.deleteSelectedList,createNewList:t.createAndAddList}}),e("followage",{attrs:{userId:t.user.id,showFollowersList:t.switchToFollowers,showFollowingList:t.switchToFollowing}})],1)]),t.display_past_visits?e("div",{staticClass:"column is-three-quarters"},[e("h1",{staticClass:"title"},[t._v("Past visits")]),e("b-pagination",{attrs:{total:t.total_visits,"per-page":t.visit_per_page},on:{change:t.loadVisits},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}),e("div",{staticClass:"columns is-multiline"},[t.visited_restaurants.length<1&&this.isVisitedRestaurantsloaded?e("div",{staticClass:"column is-half-desktop is-full-tablet"},[t._v(" No Restaurants Visited ")]):t._e(),t._l(t.visited_restaurants,(function(s){return e("div",{key:s.restaurant.id,staticClass:"column is-half-desktop is-full-tablet"},[e("restaurant-card",{attrs:{restaurant:s.restaurant,user:t.user,provenance:t.provenance,visits:s.visits,hideModal:!1,favoriteLists:t.favorites_lists,isLoaded:t.isVisitedRestaurantsloaded}})],1)}))],2)],1):t.display_favorites?e("div",{staticClass:"column is-three-quarters"},[t.editMode?t._e():e("h1",{staticClass:"title"},[t._v(" "+t._s(this.current_favorites_list.name)+" "),e("b-button",{attrs:{"icon-left":"edit"},on:{click:t.toggleEditMode}})],1),t.editMode?e("div",{staticClass:"field has-addons"},[e("div",{staticClass:"control"},[e("b-input",{attrs:{type:"text"},model:{value:t.current_favorites_list.name,callback:function(e){t.$set(t.current_favorites_list,"name",e)},expression:"current_favorites_list.name"}})],1),e("div",{staticClass:"control"},[e("b-button",{attrs:{"icon-left":"edit",type:"is-primary"},on:{click:t.changeName}},[t._v(" Change Name ")])],1)]):t._e(),e("b-button",{staticClass:"is-primary is-light",on:{click:function(e){return t.switchToPastVisits()}}},[t._v("Return to past visits view")]),e("div",{staticClass:"columns is-multiline"},[t.current_favorites_list.restaurants.length<1?e("div",{staticClass:"column is-half-desktop is-full-tablet"},[t._v(" List currently empty ")]):t._e(),t._l(t.current_favorites_with_restaurants.restaurants,(function(s){return e("div",{key:s.index,staticClass:"column is-half-desktop is-full-tablet"},[e("restaurant-card",{attrs:{hideModal:!0,restaurant:s,user:t.user,provenance:t.provenance,favoriteLists:t.favorites_lists,deleteFromList:t.deleteFromList,isLoaded:t.isFavoritesListsLoaded},on:{addedToFavorite:function(e){return t.loadFavoriteListItems(t.current_favorites_with_restaurants.id)}}})],1)}))],2)],1):t.display_followers?e("div",{staticClass:"column is-three-quarters"},[e("h1",{staticClass:"title"},[t._v("Followers")]),e("b-button",{staticClass:"is-primary is-light",on:{click:function(e){return t.switchToPastVisits()}}},[t._v("Return to past visits view")]),e("div",{staticClass:"columns is-multiline"},[t.user.followers.length<1?e("div",{staticClass:"column is-half-desktop is-full-tablet"},[t._v(" No follower yet ")]):t._e(),t._l(this.user.followers,(function(t){return e("div",{key:t.index,staticClass:"column is-half-desktop is-full-tablet"},[e("user-card",{attrs:{user:t}})],1)}))],2)],1):t.display_following?e("div",{staticClass:"column is-three-quarters"},[e("h1",{staticClass:"title"},[t._v("Following")]),e("b-button",{staticClass:"is-primary is-light",on:{click:function(e){return t.switchToPastVisits()}}},[t._v("Return to past visits view")]),e("div",{staticClass:"columns is-multiline"},[t.user.following.length<1?e("div",{staticClass:"column is-half-desktop is-full-tablet"},[t._v(" No following yet ")]):t._e(),t._l(this.user.following,(function(t){return e("div",{key:t.index,staticClass:"column is-half-desktop is-full-tablet"},[e("user-card",{attrs:{user:t}})],1)}))],2)],1):t._e()])])},ee=[],se=function(){var t=this,e=t._self._c;return e("div",{staticClass:"favorites-manager"},[e("div",{staticClass:"field"},[e("b-dropdown",{attrs:{"aria-role":"list"}},[e("button",{staticClass:"button is-primary",attrs:{slot:"trigger"},slot:"trigger"},[e("span",[t._v("Delete a list")])]),t._l(t.favoritesLists,(function(s){return e("b-dropdown-item",{key:s.id,attrs:{"aria-role":"listitem"},on:{click:function(e){return t.deleteSelectedList(s.id)}}},[t._v(" "+t._s(s.name)+" ")])}))],2)],1),e("b-field",{attrs:{position:"is-centered"}},[e("div",{staticClass:"control"},[e("b-input",{attrs:{type:"text",placeholder:"Create new list",expanded:""},model:{value:t.new_list_name,callback:function(e){t.new_list_name=e},expression:"new_list_name"}})],1),e("div",{staticClass:"control"},[e("b-button",{attrs:{type:"is-primary"},on:{click:function(e){return t.createNewList(t.new_list_name)}}},[t._v(" Create ")])],1)])],1)},ae=[],ne={name:"FavoritesManager",props:["favoritesLists","userId","deleteSelectedList","createNewList"],data:function(){return{new_list_name:""}},methods:{}},re=ne,ie=(s("8fca"),Object(P["a"])(re,se,ae,!1,null,"4edbc88c",null)),oe=ie.exports,ue=s("6821"),ce=s.n(ue),le=function(){function t(e){d()(this,t),this.email=e,this.hash=ce()(e.trim()),this.baseURL="https://www.gravatar.com/avatar/"}return h()(t,[{key:"getAvatarURL",value:function(t){return this.baseURL+this.hash+"?s="+t}}]),t}(),de=function(){var t=this,e=t._self._c;return e("div",{staticClass:"followage"},[e("div",{staticClass:"field"},[e("button",{staticClass:"button is-primary",attrs:{slot:"trigger"},on:{click:function(e){return t.showFollowersList()}},slot:"trigger"},[e("span",[t._v("Followers ("+t._s(t.followers_count)+")")])])]),e("div",{staticClass:"field"},[e("button",{staticClass:"button is-primary",attrs:{slot:"trigger"},on:{click:function(e){return t.showFollowingList()}},slot:"trigger"},[e("span",[t._v("Following ("+t._s(t.following_count)+")")])])])])},pe=[],he={mounted:function(){this.user=this.$root.user,this.followers_count=this.user.followers.length,this.following_count=this.user.following.length},name:"Followage",props:["showFollowingList","showFollowersList","followersCount","followingCount"],data:function(){return{user:{},followers_count:0,following_count:0}},methods:{}},fe=he,ve=(s("dfb2"),Object(P["a"])(fe,de,pe,!1,null,"5584c895",null)),me=ve.exports,ge=function(){var t=this,e=t._self._c;return e("div",{staticClass:"user-box"},[t.isLoaded?t._e():e("div",{staticClass:"box"},[e("div",{staticClass:"columns is-mobile"},[e("div",{staticClass:"column is-one-third"},[e("b-carousel",{attrs:{autoplay:!1,indicator:!1}})],1),e("div",{staticClass:"column"},[e("h5",{staticClass:"title is-5"},[e("b-skeleton",{attrs:{animated:!0}})],1),e("b-skeleton",{attrs:{animated:!0}}),e("b-skeleton",{attrs:{animated:!0}}),e("b-skeleton",{attrs:{animated:!0}}),e("b-skeleton",{attrs:{animated:!0}}),e("b-skeleton",{attrs:{animated:!0}})],1)])]),t.isLoaded?e("div",{staticClass:"box"},[e("div",{staticClass:"columns"},[e("div",{staticClass:"column"},[e("h5",{staticClass:"title is-5"},[e("router-link",{attrs:{to:"/userview/"+t.user.id}},[t._v(t._s(t.user.name))])],1)])])]):t._e()])},be=[],we={name:"UserCard",props:["user"],data:function(){return{isLoaded:!0}},isLoaded:!0},_e=we,ke=(s("ffcf"),Object(P["a"])(_e,ge,be,!1,null,"556802aa",null)),xe=ke.exports,ye={mounted:function(){this.user=this.$root.user,this.apiUsers=new g(this.$root.user.token),this.apiVisits=new gt(this.$root.user.id,this.$root.user.token),this.apiFavorites=new Pt(this.$root.user.token),this.apiRestaurants=new W(this.$root.user.token),this.gravatarURL=new le(this.user.email).getAvatarURL(200),this.loadUser()},methods:{loadUser:function(){var t=this;this.getUserById().then((function(e){t.profile=e})),this.loadVisits(),this.getFavoritesLists().then((function(e){t.favorites_lists=e.items}))},loadVisits:function(){var t=this;return n()(i.a.mark((function e(){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.isVisitedRestaurantsloaded=!1,t.visited_restaurants=[],t.getRestaurantVisits(t.currentPage-1).then((function(e){void 0!=e&&(t.restaurant_visits=e.items),t.loadVisitedRestaurants(),t.total_visits=e.total}));case 3:case"end":return e.stop()}}),e)})))()},getUserById:function(){var t=this;return n()(i.a.mark((function e(){var s;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isUserLoaded=!1,e.next=3,t.apiUsers.getUserById(t.user.id);case 3:return s=e.sent,t.isUserLoaded=!0,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})))()},getRestaurantVisits:function(t){var e=this;return n()(i.a.mark((function s(){var a;return i.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e.isVisitedRestaurantsloaded=!1,s.next=3,e.apiVisits.getAllRestaurantsVisits(t);case 3:return a=s.sent,e.isVisitedRestaurantsloaded=!0,s.abrupt("return",a);case 6:case"end":return s.stop()}}),s)})))()},getFavoritesLists:function(){var t=this;return n()(i.a.mark((function e(){var s;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isFavoritesListsLoaded=!1,e.next=3,t.apiUsers.getFavoritesListsByUserId(t.user.id);case 3:return s=e.sent,t.isFavoritesListsLoaded=!0,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})))()},loadVisitedRestaurants:function(){var t=this;this.isRestaurantsLoaded=!1;for(var e=this.restaurant_visits.map((function(t){return t.restaurant_id})).filter((function(t,e,s){return s.indexOf(t)===e})),s=function(s){var a=t.restaurant_visits.filter((function(t){return t.restaurant_id===e[s]}));t.getRestaurant(e[s]).then((function(e){t.visited_restaurants.push({restaurant:e,visits:a})}))},a=0;a<e.length;a++)s(a);this.isRestaurantsLoaded=!0},getRestaurant:function(t){var e=this;return n()(i.a.mark((function s(){var a;return i.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,e.apiRestaurants.getRestaurant(t);case 2:return a=s.sent,s.abrupt("return",a);case 4:case"end":return s.stop()}}),s)})))()},loadFavoriteListItems:function(t){var e=this;this.getFavoriteList(t).then((function(t){e.current_favorites_list=t,e.current_favorites_with_restaurants=t,e.switchToFavorites(),e.loadFavoriteRestaurants()}))},getFavoriteList:function(t){var e=this;return n()(i.a.mark((function s(){var a;return i.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,e.apiFavorites.getFavoriteListById(t);case 2:return a=s.sent,s.abrupt("return",a);case 4:case"end":return s.stop()}}),s)})))()},loadFavoriteRestaurants:function(){var t=this,e=this.current_favorites_list.restaurants.map((function(t){return t.id}));this.current_favorites_with_restaurants.restaurants=[];for(var s=0;s<e.length;s++)this.getRestaurant(e[s]).then((function(e){t.current_favorites_with_restaurants.restaurants.push(e)}))},deleteSelectedList:function(t){var e=this;return n()(i.a.mark((function s(){return i.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,e.apiFavorites.deleteFavoriteList(t);case 2:e.favorites_lists=e.favorites_lists.filter((function(e){return e.id!=t})),e.current_favorites_list.id==t&&e.switchToPastVisits();case 4:case"end":return s.stop()}}),s)})))()},switchToPastVisits:function(){this.display_past_visits=!0,this.display_favorites=!1,this.display_following=!1,this.display_followers=!1},switchToFavorites:function(){this.display_past_visits=!1,this.display_favorites=!0,this.display_following=!1,this.display_followers=!1},switchToFollowing:function(){this.display_past_visits=!1,this.display_favorites=!1,this.display_following=!0,this.display_followers=!1},switchToFollowers:function(){this.display_past_visits=!1,this.display_favorites=!1,this.display_following=!1,this.display_followers=!0},deleteFromList:function(t){var e=this;return n()(i.a.mark((function s(){return i.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,e.apiFavorites.deleteRestaurantFromList(e.current_favorites_list.id,t);case 2:e.current_favorites_list.restaurants=e.current_favorites_list.restaurants.filter((function(e){return e.id!=t}));case 3:case"end":return s.stop()}}),s)})))()},toggleEditMode:function(){this.editMode=!this.editMode},changeName:function(){var t=this;this.changeFavoriteListName().then((function(){t.toggleEditMode(),t.favorites_lists.forEach((function(e){e.id==t.current_favorites_list.id&&(e.name=t.current_favorites_list.name)}))}))},changeFavoriteListName:function(){var t=this;return n()(i.a.mark((function e(){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.apiFavorites.updateFavoriteList(t.current_favorites_list.id,t.current_favorites_list.name,t.current_favorites_list.owner);case 1:case"end":return e.stop()}}),e)})))()},createAndAddList:function(t){var e=this;this.createNewList(t).then((function(t){e.getFavoriteList(t).then((function(t){e.favorites_lists.push(t)}))}))},createNewList:function(t){var e=this;return n()(i.a.mark((function s(){var a;return i.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,e.apiFavorites.createFavoriteList(t,e.profile.email);case 2:return a=s.sent,s.abrupt("return",a.id);case 4:case"end":return s.stop()}}),s)})))()}},data:function(){return{apiUsers:{},apiVisits:{},apiFavorites:{},apiRestaurants:{},user:"",isUserLoaded:!1,isVisitedRestaurantsloaded:!1,isRestaurantsLoaded:!1,isFavoritesListsLoaded:!1,profile:{},restaurant_visits:[],visited_restaurants:[],favorites_lists:[],current_favorites_list:{},current_favorites_with_restaurants:{},provenance:"user",display_past_visits:!0,display_favorites:!1,display_following:!1,display_followers:!1,total_visits:0,visit_per_page:10,currentPage:1,editMode:!1,gravatarURL:""}},components:{RestaurantCard:It,FavoritesManager:oe,Followage:me,UserCard:xe}},Ce=ye,Le=(s("180a"),Object(P["a"])(Ce,te,ee,!1,null,"34fc6dc2",null)),Pe=Le.exports,Fe=function(){var t=this,e=t._self._c;return e("div",{staticClass:"section"},[e("sign-up-form",{attrs:{submit:t.validateAndSignup}})],1)},Ue=[],Re=function(){var t=this,e=t._self._c;return e("div",{staticClass:"section"},[e("div",{staticClass:"SignUpForm"},[e("div",{staticClass:"columns"},[e("div",{staticClass:"column"}),e("div",{staticClass:"column is-one-third is-two-thirds-tablet"},[t._m(0),e("h1",{staticClass:"title is-1"},[t._v(" Sign up for free ! ")]),e("input-field",{attrs:{label:"Email",type:"email",maxlength:100,minChars:4,icon:"envelope",validationMethod:t.validateEmail},on:{isValid:t.updateIsValidEmail},model:{value:t.formData.email,callback:function(e){t.$set(t.formData,"email",e)},expression:"formData.email"}}),e("input-field",{attrs:{label:"Username",type:"username",maxlength:30,minChars:4,icon:"user"},on:{isValid:t.updateIsValidUserName},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}}),e("input-field",{attrs:{label:"Password",type:"Password",maxlength:30,minChars:4,icon:"key"},on:{isValid:t.updateIsValidPassword},model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData.password"}}),e("input-field",{attrs:{label:"Confirm Password",type:"Password",maxlength:30,minChars:4,validationMethod:t.validateConfirmation},on:{isValid:t.updateIsValidPasswordConfirmation},model:{value:t.formData.passwordConfirmation,callback:function(e){t.$set(t.formData,"passwordConfirmation",e)},expression:"formData.passwordConfirmation"}}),e("b-button",{attrs:{type:"is-primary",expanded:""},on:{click:function(e){return t.validateAndSubmit()}}},[t._v("Submit")]),t._v(" Already a member ? "),e("b-button",{staticClass:"button",attrs:{tag:"router-link",to:{path:"/Login"},expanded:""}},[e("strong",[t._v("Login")])])],1),e("div",{staticClass:"column"})])])])},Ie=[function(){var t=this,e=t._self._c;return e("figure",{staticClass:"image is-96x96 container"},[e("img",{staticClass:"logoNav",attrs:{src:s("0781"),alt:"logo-no-text"}})])}],Me=function(){var t=this,e=t._self._c;return e("b-field",{attrs:{label:t.label,message:t.message,type:t.getInputType(t.state)}},[e("b-input",{attrs:{placeholder:t.label,icon:t.icon,type:t.type,maxlength:t.maxlength},on:{input:function(e){return t.validate()}},model:{value:t.inputVal,callback:function(e){t.inputVal=e},expression:"inputVal"}})],1)},Ve=[],$e={name:"InputField",props:{hasValidation:{type:Boolean,default:!0},minChars:{type:Number,default:4},label:{type:String,required:!0},type:{type:String,required:!0},maxlength:{type:Number,default:30},icon:String,value:[String,Number],validationMethod:{type:Function,default:function(){return!0}}},data:function(){return{message:[],state:0,isValid:!1}},methods:{validate:function(){if(this.hasValidation){var t=this.validateLength(this.value,this.minChars),e=this.validationMethod();t?e?(this.state=1,this.message=[]):(this.state=-1,this.message=void 0):(this.state=-1,this.message=[this.label+" is too short"])}else this.state=0;this.isValid=1==this.state,this.$emit("isValid",this.isValid)},validateLength:function(t,e){return t.length>=e},getInputType:function(t){return 1==t?"is-success":-1==t?"is-danger":""}},computed:{inputVal:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}}},Se=$e,Oe=Object(P["a"])(Se,Me,Ve,!1,null,"0c69ada8",null),Ae=Oe.exports,Te={components:{InputField:Ae},name:"SignUpForm",props:["submit"],data:function(){return{minimumChars:{password:4,name:4},formData:{name:"",email:"",password:"",passwordConfirmation:""},messages:{password:[],email:[],name:[]},isEmailValid:0,isNameValid:0,isPasswordValid:0,isConfirmationValid:0}},methods:{validateAndSubmit:function(){1==this.isEmailValid&&1==this.isNameValid&&this.isPasswordValid&&this.validateConfirmation()&&this.submit(this.formData)},validateEmail:function(){var t=this.formData.email,e=/\S+@\S+\.\S+/;return e.test(t)},validateName:function(){var t=this.formData.name;this.isNameValid=this.validateLength(t,this.minimumChars.name),-1==this.isNameValid?this.messages.name=["Username is too short"]:this.messages.name=[]},validateConfirmation:function(){var t=this.formData,e=t.password,s=t.passwordConfirmation,a=s===e;return a},updateIsValidPassword:function(t){this.isPasswordValid=t},updateIsValidEmail:function(t){this.isEmailValid=t},updateIsValidUserName:function(t){this.isNameValid=t},updateIsValidPasswordConfirmation:function(t){this.isConfirmationValid=t},validateLength:function(t,e){return t.length<=e?-1:1},getInputType:function(t){return 1==t?"is-success":-1==t?"is-danger":""}}},De=Te,je=Object(P["a"])(De,Re,Ie,!1,null,"31c1d842",null),Ee=je.exports,Ne={name:"SignUp",components:{SignUpForm:Ee},data:function(){return{apiUser:new g}},methods:{validateAndSignup:function(t){var e=this;return n()(i.a.mark((function s(){return i.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,e.signUp(t);case 2:case"end":return s.stop()}}),s)})))()},signUp:function(t){var e=this;return n()(i.a.mark((function s(){var a,n,r,o,u;return i.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a=t.email,n=t.name,r=t.password,o={email:a,name:n,password:r},s.next=4,e.apiUser.signUpAndLogin(o);case 4:u=s.sent,u instanceof Error||(e.$root.user=u,e.$root.authenticated=!0,e.$router.push("/"));case 6:case"end":return s.stop()}}),s)})))()}}},Ge=Ne,qe=Object(P["a"])(Ge,Fe,Ue,!1,null,"50f2cb53",null),Be=qe.exports,ze=function(){var t=this,e=t._self._c;return e("div",{staticClass:"section"},[e("login-form",{attrs:{submit:t.login,error:t.errorMessage}})],1)},We=[],He=function(){var t=this,e=t._self._c;return e("div",{staticClass:"section"},[e("div",{staticClass:"LoginForm"},[e("div",{staticClass:"columns"},[e("div",{staticClass:"column"}),e("div",{staticClass:"column is-one-third is-two-thirds-tablet"},[t._m(0),e("h1",{staticClass:"title is-1"},[t._v(" Log in ")]),e("span",{staticClass:"error"},[t._v(t._s(t.error))]),e("input-field",{attrs:{label:"Email",type:"email",icon:"envelope",hasValidation:!0},model:{value:t.formData.email,callback:function(e){t.$set(t.formData,"email",e)},expression:"formData.email"}}),e("input-field",{attrs:{label:"Password",type:"Password",icon:"key",hasValidation:!1},model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData.password"}}),e("b-button",{attrs:{type:"is-primary",expanded:""},on:{click:t.validateAndSubmit}},[t._v("Submit")]),t._v(" Not a member ? "),e("b-button",{staticClass:"button",attrs:{tag:"router-link",to:{path:"/SignUp"},expanded:""}},[e("strong",[t._v("Sign up")])])],1),e("div",{staticClass:"column"})])])])},Je=[function(){var t=this,e=t._self._c;return e("figure",{staticClass:"image is-96x96 container"},[e("img",{staticClass:"logoNav",attrs:{src:s("0781"),alt:"logo-no-text"}})])}],Ke={components:{InputField:Ae},name:"LoginForm",props:["submit","error"],data:function(){return{formData:{email:"",password:""}}},methods:{validateAndSubmit:function(){this.submit(this.formData)}}},Xe=Ke,Ye=(s("f086"),Object(P["a"])(Xe,He,Je,!1,null,"0b66df07",null)),Ze=Ye.exports,Qe={name:"Login",components:{LoginForm:Ze},data:function(){return{apiUser:new g,errorMessage:""}},methods:{login:function(t){var e=this;return n()(i.a.mark((function s(){var a,n,r,o;return i.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a=t.email,n=t.password,r={email:a,password:n},s.next=4,e.apiUser.logIn(r);case 4:o=s.sent,o instanceof Error?e.errorMessage="Invalid credentials":(e.$root.user=o,e.$root.authenticated=!0,e.$router.push("/"));case 6:case"end":return s.stop()}}),s)})))()}}},ts=Qe,es=Object(P["a"])(ts,ze,We,!1,null,"497a384b",null),ss=es.exports,as=function(){var t=this,e=t._self._c;return e("div",{staticClass:"section"},[e("div",{staticClass:"columns"},[e("div",{staticClass:"column"},[e("h1",{staticClass:"title"},[t._v("Search Results")]),e("b-pagination",{attrs:{total:t.total,"per-page":t.perPage},on:{change:t.search},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)]),e("div",{staticClass:"columns is-multiline"},[this.usersList.length<1?e("div",{staticClass:"column is-half-desktop is-full-tablet"},[t._v(" No results found ")]):t._e(),t._l(this.usersList,(function(t){return e("div",{key:t.id},[e("user-card",{attrs:{user:t}})],1)}))],2)])},ns=[],rs={mounted:function(){this.user=this.$root.user,this.search()},watch:{"$route.params.searchTerms":function(){this.search()}},beforeRouteUpdate:function(t,e,s){t.params.searchTerms&&(this.searchInput=t.params.searchTerms),s()},name:"UserGuestView",data:function(){return{total:0,currentPage:1,perPage:10,apiUsers:new g(this.$root.user.token),usersList:[],searchInput:this.$route.params.searchTerms,user:{}}},methods:{search:function(){var t=this;this.getUsers().then((function(e){t.usersList=e.items}))},getUsers:function(){var t=this;return n()(i.a.mark((function e(){var s,a;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("all"==t.searchInput){e.next=8;break}return e.next=3,t.apiUsers.search(t.searchInput,t.currentPage-1);case 3:return s=e.sent,t.total=s.total,e.abrupt("return",s);case 8:return e.next=10,t.apiUsers.getUsers(t.currentPage-1);case 10:return a=e.sent,t.total=a.total,e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))()}},components:{UserCard:xe}},is=rs,os=Object(P["a"])(is,as,ns,!1,null,null,null),us=os.exports,cs=function(){var t=this,e=t._self._c;return e("div",{staticClass:"section"},[e("div",{staticClass:"columns"},[e("div",{staticClass:"column is-half"},[e("div",{staticClass:"box"},[t.userIsLoaded?e("h1",{staticClass:"title"},[t._v(t._s(t.targetUser.name))]):t._e(),t.userIsLoaded?e("p",[t._v(" "+t._s(t.targetUser.email)+" ")]):t._e(),t.userIsLoaded?e("p",[t._v(" "+t._s(t.targetUser.rating)+" ")]):t._e(),e("div",[t.userIsLoaded?e("follow-button",{attrs:{targetUser:t.targetUser}}):t._e()],1)])])])])},ls=[],ds=function(){var t=this,e=t._self._c;return t.userIsFollowed?e("div",{staticClass:"btn-unfollow"},[e("button",{staticClass:"button",on:{click:t.unfollow}},[t._v(" Unfollow ")])]):e("div",{staticClass:"btn-follow"},[e("button",{staticClass:"button",on:{click:t.follow}},[t._v(" Follow ")])])},ps=[],hs={name:"FollowButton",props:["targetUser"],mounted:function(){this.user=this.$root.user,this.apiUsers=new g(this.user.token),this.establishFollowage()},data:function(){return{user:{},apiUsers:{},userIsFollowed:!1}},methods:{follow:function(){var t=this;this.followUser().then((function(){t.userIsFollowed=!t.userIsFollowed}))},unfollow:function(){var t=this;this.unfollowUser().then((function(){t.userIsFollowed=!t.userIsFollowed}))},followUser:function(){var t=this;return n()(i.a.mark((function e(){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.apiUsers.followUser(t.targetUser.id);case 2:case"end":return e.stop()}}),e)})))()},unfollowUser:function(){var t=this;return n()(i.a.mark((function e(){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.apiUsers.unfollowUser(t.targetUser.id);case 2:case"end":return e.stop()}}),e)})))()},establishFollowage:function(){var t=this;this.user.following.forEach((function(e){e.id==t.targetUser.id&&(t.userIsFollowed=!0)}))}}},fs=hs,vs=Object(P["a"])(fs,ds,ps,!1,null,null,null),ms=vs.exports,gs={mounted:function(){this.apiUsers=new g(this.$root.user.token),this.targetUser=this.getUser()},name:"UserView",data:function(){return{apiUsers:{},targetUser:{},userId:this.$route.params.userId,userIsLoaded:!1}},methods:{getUser:function(){var t=this;this.fetchUserInfo().then((function(e){t.targetUser=e,t.userIsLoaded=!0}))},fetchUserInfo:function(){var t=this;return n()(i.a.mark((function e(){var s;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.apiUsers.getUserById(t.userId),e.abrupt("return",s);case 2:case"end":return e.stop()}}),e)})))()}},components:{FollowButton:ms}},bs=gs,ws=Object(P["a"])(bs,cs,ls,!1,null,null,null),_s=ws.exports;o["a"].use(T["a"]);var ks=new T["a"]({routes:[{path:"/",name:"Home",component:Nt,meta:{requiresAuth:!0}},{path:"/restaurant/:id",name:"Restaurant",component:Qt,meta:{requiresAuth:!0}},{path:"/user",name:"User",component:Pe,meta:{requiresAuth:!0}},{path:"/userguestview/:searchTerms",name:"UserGuestView",component:us,meta:{requiresAuth:!0}},{path:"/userview/:userId",name:"UserView",component:_s,meta:{requiresAuth:!0}},{path:"/SignUp",name:"SignUp",component:Be},{path:"/login",name:"Login",component:ss}],methods:{logOut:function(){this.$emit("logOut")}}}),xs=s("ecee"),ys=s("c074"),Cs=s("ad3d"),Ls=s("289d"),Ps=s("5b3d"),Fs=s.n(Ps),Us=s("2b27");xs["c"].add(ys["a"]),o["a"].component("font-awesome-icon",Cs["a"]),o["a"].component("star-rating",Fs.a),o["a"].use(Ls["a"],{defaultIconComponent:"font-awesome-icon",defaultIconPack:"fas"}),o["a"].use($t,{load:{key:"AIzaSyAKp8Sa9fa7-OXt9LJvd61Sc2zO6uz22Xs",libraries:"directions"}}),o["a"].use(Us),o["a"].config.productionTip=!1,ks.beforeEach(function(){var t=n()(i.a.mark((function t(e,s,a){var n,r,u;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.matched.some((function(t){return t.meta.requiresAuth}))||"/login"===e.path){t.next=21;break}if(o["a"].$cookies.get("token")){t.next=5;break}a({name:"Login"}),t.next=19;break;case 5:return n=new g(o["a"].$cookies.get("token")),t.next=8,n.getUserFromToken();case 8:if(r=t.sent,r.ok){t.next=13;break}a({name:"Login"}),t.next=19;break;case 13:return t.next=15,r.json();case 15:u=t.sent,ks.app.$root.user=u,ks.app.$root.authenticated=!0,a();case 19:t.next=22;break;case 21:a();case 22:case"end":return t.stop()}}),t)})));return function(e,s,a){return t.apply(this,arguments)}}()),new o["a"]({render:function(t){return t(A)},data:function(){return{authenticated:!1,user:null}},methods:{isAuthenticated:function(){return this.authenticated}},router:ks}).$mount("#app")},5869:function(t,e,s){},"68ef":function(t,e,s){},"68f0":function(t,e,s){},"8fca":function(t,e,s){"use strict";s("b1d5")},"9a71":function(t,e,s){},"9d0d":function(t,e,s){},a87d:function(t,e,s){"use strict";s("3ea7")},acec:function(t,e,s){"use strict";s("1ef4")},b1d5:function(t,e,s){},d184:function(t,e,s){"use strict";s("68f0")},d28c:function(t,e,s){"use strict";s("4cff")},dfb2:function(t,e,s){"use strict";s("5869")},ea02:function(t,e,s){t.exports=s.p+"img/ufood-logo-transparent.583a08fd.png"},eb52:function(t,e,s){},f086:function(t,e,s){"use strict";s("4e87")},fe4e:function(t,e,s){"use strict";s("9d0d")},ffcf:function(t,e,s){"use strict";s("03c5")}});
//# sourceMappingURL=app.205f8dba.js.map